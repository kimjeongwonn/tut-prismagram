const sgTransport = require('nodemailer-sendgrid-transport');
import jwt from 'jsonwebtoken';
import nodemailer from 'nodemailer';
import dotenv from 'dotenv';
dotenv.config();

interface Email {
  from: string;
  to: string;
  subject: string;
  html?: string;
}

const adjectives = [
  'ill-fated',
  'hulking',
  'longing',
  'taboo',
  'sudden',
  'fancy',
  'domineering',
  'faded',
  'adaptable',
  'decisive',
  'hurt',
  'lamentable',
  'silent',
  'mundane',
  'moldy',
  'tiresome',
  'acid',
  'sad',
  'sneaky',
  'rainy',
  'aspiring',
  'sour',
  'low',
  'productive',
  'fierce',
  'reminiscent',
  'faulty',
  'repulsive',
  'well-made',
  'scattered',
  'unequaled',
  'special',
  'imported',
  'furry',
  'idiotic',
  'ready',
  'teeny-tiny',
  'faithful',
  'unused',
  'nonchalant',
  'sable',
  'ruddy',
  'graceful',
  'dead',
  'unwieldy',
  'encouraging',
  'ludicrous',
  'polite',
  'endurable',
  'few',
  'boiling',
  'pretty',
  'left',
  'scandalous',
  'tall',
  'determined',
  'irritating',
  'marvelous',
  'unsuitable',
  'vigorous',
  'acceptable',
  'frightened',
  'accessible',
  'hypnotic',
  'plant',
  'habitual',
  'bloody',
  'warm',
  'discreet',
  'normal',
  'depressed',
  'periodic',
  'cheap',
  'upset',
  'known',
  'hellish',
  'instinctive',
  'fluffy',
  'jittery',
  'zealous',
  'outrageous',
  'glossy',
  'even',
  'guiltless',
  'billowy',
  'level',
  'thinkable',
  'literate',
  'next',
  'scientific',
  'tense',
  'shaky',
  'electric',
  'eager',
  'uninterested',
  'delicious',
  'tasteless',
  'pathetic',
  'adorable',
  'excited',
  'thirsty',
  'zippy',
  'null',
  'rebel',
  'quickest',
  'hesitant',
  'female',
  'burly',
  'mushy',
  'spiky',
  'willing',
  'blue-eyed',
  'abiding',
  'parsimonious',
  'offbeat',
  'political',
  'dreary',
  'fantastic',
  'smooth',
  'capricious',
  'busy',
  'diligent',
  'optimal',
  'bent',
  'envious',
  'needy',
  'omniscient',
  'crowded',
  'abrasive',
  'ten',
  'selfish',
  'hallowed',
  'far',
  'undesirable',
  'medical',
  'false',
  'brash',
  'glorious',
  'adventurous',
  'insidious',
  'gainful',
  'fast',
  'guttural',
  'teeny',
  'terrific',
  'simplistic',
  'alert',
  'concerned',
  'abashed',
  'evasive',
  'lean',
  'wide',
  'gabby',
  'common',
  'wealthy',
  'feeble',
  'befitting',
  'clever',
  'cruel',
  'coherent',
  'detailed',
  'towering',
  'available',
  'threatening',
  'fair',
  'certain',
  'typical',
  'tan',
  'smelly',
  'wasteful',
  'wicked',
  'careless',
  'calculating',
  'secretive',
  'possible',
  'dazzling',
  'tart',
  'imperfect',
  'married',
  'living',
  'merciful',
  'foamy',
  'subdued',
  'uptight',
  'puny',
  'lively',
  'tedious',
  'snobbish',
  'wanting',
  'equal',
  'gleaming',
  'unknown',
  'stereotyped',
  'blue',
  'naive',
  'sore',
  'wrathful',
  'useless',
  'unhealthy',
  'goofy',
  'charming',
  'earsplitting',
  'satisfying',
  'fragile',
  'lavish',
  'plastic',
  'measly',
  'obtainable',
  'jumbled',
  'chubby',
  'noxious',
  'obeisant',
  'thundering',
  'nebulous',
  'delicate',
  'godly',
  'confused',
  'recondite',
  'various',
  'overwrought',
  'magnificent',
  'tidy',
  'ritzy',
  'vast',
  'debonair',
  'wise',
  'male',
  'brawny',
  'well-off',
  'callous',
  'horrible',
  'secret',
  'stupid',
  'early',
  'lumpy',
  'flimsy',
  'delightful',
  'cute',
  'honorable',
  'flippant',
  'gratis',
  'obsolete',
  'soggy',
  'lewd',
  'toothsome',
  'half',
  'pink',
  'exclusive',
  'gruesome',
  'cool',
  'remarkable',
  'absurd',
  'creepy',
  'milky',
  'gamy',
  'far-flung',
  'sweltering',
  'general',
  'right',
  'clear',
  'classy',
  'flowery',
  'miniature',
  'cumbersome',
  'hanging',
  'aggressive',
  'purring',
  'glamorous',
  'jaded',
  'imminent',
  'disturbed',
  'frightening',
  'quarrelsome',
  'drab',
  'thoughtless',
  'prickly',
  'fresh',
  'obscene',
  'painful',
  'military',
  'lovely',
  'bumpy',
  'hilarious',
  'spotless',
  'boorish',
  'sticky',
  'synonymous',
  'shy',
  'spiteful',
  'cut',
  'public',
  'utter',
  'overrated',
  'ethereal',
  'madly',
  'annoyed',
  'thin',
  'loutish',
  'historical',
  'spicy',
  'demonic',
  'hissing',
  'necessary',
  'berserk',
  'interesting',
  'large',
  'symptomatic',
  'unbecoming',
  'actually',
  'natural',
  'trite',
  'rotten',
  'strong',
  'jazzy',
  'relieved',
  'questionable',
  'auspicious',
  'unnatural',
  'somber',
  'yellow',
  'nosy',
  'economic',
  'ill',
  'mighty',
  'free',
  'juvenile',
  'pumped',
  'eminent',
  'future',
  'efficacious',
  'impolite',
  'wacky',
  'combative',
  'short',
  'acoustic',
  'grateful',
  'rustic',
  'vagabond',
  'unkempt',
  'sleepy',
  'yielding',
  'dirty',
  'elite',
  'numberless',
  'average',
  'glistening',
  'wrong',
  'elderly',
  'needless',
  'nappy',
  'venomous',
  'bawdy',
  'addicted',
  'swift',
  'odd',
  'stiff',
  'tame',
  'helpful',
  'tangy',
  'keen',
  'workable',
  'light',
  'greedy',
  'minor',
  'open',
  'cute',
  'macabre',
  'deranged',
  'adamant',
  'like',
  'straight',
  'violent',
  'handsome',
  'bitter',
  'striped',
  'tacky',
  'illegal',
  'tearful',
  'jolly',
  'hungry',
  'worthless',
  'gaudy',
  'foolish',
  'quirky',
  'elastic',
  'curly',
  'astonishing',
  'puzzling',
  'poised',
  'flagrant',
  'adhesive',
  'disillusioned',
  'judicious',
  'loud',
  'lethal',
  'complete',
  'volatile',
  'weary',
  'soft',
  'frail',
  'huge',
  'exuberant',
  'succinct',
  'inquisitive',
  'clumsy',
  'screeching',
  'well-groomed',
  'violet',
  'high',
  'slimy',
  'innocent',
  'faint',
  'exotic',
  'scary',
  'disastrous',
  'evanescent',
  'romantic',
  'safe',
  'wary',
  'paltry',
  'dashing',
  'wholesale',
  'bewildered',
  'truculent',
  'ignorant',
  'ruthless',
  'caring',
  'gray',
  'bite-sized',
  'second-hand',
  'lacking',
  'separate',
  'powerful',
  'observant',
  'frequent',
  'jobless',
  'fuzzy',
  'festive',
  'cheerful',
  'previous',
  'humdrum',
  'ordinary',
  'broken',
  'futuristic',
  'likeable',
  'opposite',
  'seemly',
  'tawdry',
  'dramatic',
  'tense',
  'best',
  'rambunctious',
  'pricey',
  'chunky',
  'steep',
  'unadvised',
  'subsequent',
  'breezy',
  'ubiquitous',
  'elfin',
  'awake',
  'righteous',
  'calm',
  'abrupt',
  'draconian',
  'responsible',
  'awesome',
  'deeply',
  'near',
  'damaging',
  'lazy',
  'hapless',
  'splendid',
  'unwritten',
  'ajar',
  'black',
  'probable',
  'petite',
  'upbeat',
  'scrawny',
  'good',
  'entertaining',
  'guarded',
  'wandering',
  'imaginary',
  'colorful',
  'fabulous',
  'flaky',
  'whispering',
  'hushed',
  'gorgeous',
  'torpid',
  'rich',
  'squealing',
  'green',
  'gusty',
  'misty',
  'physical',
  'superficial',
  'bright',
];
const nouns = [
  'maid',
  'show',
  'picture',
  'library',
  'zipper',
  'spring',
  'haircut',
  'cart',
  'coil',
  'pear',
  'sugar',
  'veil',
  'use',
  'plate',
  'cherry',
  'rain',
  'oil',
  'fog',
  'eggnog',
  'ducks',
  'noise',
  'smash',
  'line',
  'stick',
  'trousers',
  'stranger',
  'brake',
  'sense',
  'kettle',
  'hydrant',
  'scissors',
  'trains',
  'observation',
  'grandmother',
  'geese',
  'bikes',
  'story',
  'pickle',
  'fowl',
  'drop',
  'surprise',
  'wilderness',
  'knowledge',
  'rest',
  'wall',
  'cable',
  'glove',
  'front',
  'clover',
  'brass',
  'name',
  'earthquake',
  'class',
  'thought',
  'mailbox',
  'passenger',
  'pocket',
  'market',
  'wire',
  'brother',
  'stitch',
  'playground',
  'dolls',
  'year',
  'pigs',
  'rock',
  'writing',
  'pig',
  'lettuce',
  'animal',
  'activity',
  'death',
  'hour',
  'voice',
  'dog',
  'donkey',
  'train',
  'society',
  'bit',
  'advertisement',
  'soap',
  'ship',
  'van',
  'baby',
  'arch',
  'amount',
  'dad',
  'teeth',
  'yarn',
  'road',
  'competition',
  'language',
  'sack',
  'limit',
  'work',
  'flight',
  'creature',
  'afterthought',
  'branch',
  'ice',
  'crowd',
  'hot',
  'cook',
  'calculator',
  'nest',
  'earth',
  'rainstorm',
  'start',
  'month',
  'grade',
  'jump',
  'lock',
  'suggestion',
  'women',
  'neck',
  'produce',
  'lip',
  'balance',
  'toothbrush',
  'secretary',
  'desire',
  'boy',
  'vein',
  'ball',
  'kick',
  'rod',
  'meeting',
  'fireman',
  'sock',
  'flag',
  'skirt',
  'egg',
  'stage',
  'expert',
  'meal',
  'purpose',
  'mark',
  'motion',
  'alarm',
  'believe',
  'butter',
  'skin',
  'seashore',
  'ink',
  'camera',
  'distribution',
  'angle',
  'flesh',
  'cover',
  'man',
  'tax',
  'war',
  'mask',
  'blood',
  'field',
  'queen',
  'heat',
  'root',
  'bat',
  'paper',
  'plantation',
  'harbor',
  'existence',
  'snow',
  'shade',
  'button',
  'mom',
  'tongue',
  'car',
  'business',
  'finger',
  'point',
  'taste',
  'attraction',
  'bait',
  'pail',
  'finger',
  'base',
  'amusement',
  'tree',
  'drain',
  'worm',
  'giants',
  'frame',
  'key',
  'judge',
  'act',
  'wrist',
  'plastic',
  'swing',
  'rabbit',
  'marble',
  'argument',
  'cough',
  'baseball',
  'downtown',
  'tank',
  'calendar',
  'sheep',
  'blade',
  'sofa',
  'twig',
  'beds',
  'friend',
  'girls',
  'drawer',
  'grain',
  'gun',
  'stretch',
  'cracker',
  'pin',
  'zoo',
  'jail',
  'servant',
  'things',
  'adjustment',
  'pencil',
  'silver',
  'sign',
  'advice',
  'north',
  'support',
  'jewel',
  'straw',
  'nut',
  'yoke',
  'summer',
  'dirt',
  'desk',
  'chickens',
  'pan',
  'event',
  'land',
  'station',
  'vegetable',
  'addition',
  'bridge',
  'chess',
  'wax',
  'milk',
  'cherries',
  'jellyfish',
  'stone',
  'spoon',
  'word',
  'pollution',
  'loss',
  'floor',
  'cave',
  'squirrel',
  'tin',
  'payment',
  'cap',
  'effect',
  'interest',
  'hospital',
  'school',
  'scarecrow',
  'education',
  'level',
  'trick',
  'cellar',
  'cent',
  'instrument',
  'cup',
  'underwear',
  'rub',
  'hammer',
  'horses',
  'move',
  'cannon',
  'eggs',
  'sisters',
  'smoke',
  'horse',
  'song',
  'cub',
  'thunder',
  'waste',
  'powder',
  'expansion',
  'bath',
  'flavor',
  'toys',
  'low',
  'wine',
  'crack',
  'hall',
  'grandfather',
  'dogs',
  'hair',
  'spiders',
  'insurance',
  'tub',
  'birthday',
  'distance',
  'foot',
  'rake',
  'airplane',
  'respect',
  'building',
  'shop',
  'crow',
  'side',
  'theory',
  'ticket',
  'fly',
  'substance',
  'crib',
  'color',
  'digestion',
  'rate',
  'agreement',
  'record',
  'berry',
  'sister',
  'bed',
  'channel',
  'mist',
  'test',
  'trucks',
  'wave',
  'carpenter',
  'clam',
  'bubble',
  'cause',
  'week',
  'truck',
  'sail',
  'salt',
  'profit',
  'ocean',
  'weather',
  'office',
  'position',
  'pipe',
  'quarter',
  'bee',
  'cakes',
  'rule',
  'trees',
  'memory',
  'hat',
  'beginner',
  'sweater',
  'lamp',
  'eye',
  'scarf',
  'rat',
  'team',
  'needle',
  'shame',
  'pet',
  'ghost',
  'silk',
  'letter',
  'comparison',
  'hose',
  'territory',
  'burst',
  'tomatoes',
  'crime',
  'coal',
  'sleep',
  'destruction',
  'pets',
  'part',
  'locket',
  'bone',
  'battle',
  'zephyr',
  'daughter',
  'swim',
  'drink',
  'slave',
  'toothpaste',
  'hate',
  'creator',
  'need',
  'friends',
  'thing',
  'back',
  'duck',
  'shelf',
  'doctor',
  'bells',
  'approval',
  'invention',
  'stew',
  'zebra',
  'bike',
  'gold',
  'turkey',
  'shirt',
  'art',
  'popcorn',
  'twist',
  'songs',
  'plough',
  'iron',
  'suit',
  'sleet',
  'bulb',
  'rice',
  'furniture',
  'bear',
  'watch',
  'hands',
  'thread',
  'fire',
  'thrill',
  'night',
  'cheese',
  'dress',
  'snakes',
  'volleyball',
  'slip',
  'teaching',
  'ground',
  'cobweb',
  'ear',
  'form',
  'cars',
  'discussion',
  'cloth',
  'increase',
  'title',
  'door',
  'spade',
  'treatment',
  'account',
  'driving',
  'cactus',
  'river',
  'street',
  'laugh',
  'acoustics',
  'lumber',
  'current',
  'stamp',
  'trade',
  'walk',
  'fall',
  'sand',
  'screw',
  'rose',
  'governor',
  'liquid',
  'smell',
  'tiger',
  'kittens',
  'zinc',
  'spark',
  'basin',
  'bell',
  'person',
  'crayon',
  'division',
  'dime',
  'fold',
  'apparatus',
  'shock',
  'dock',
  'design',
  'toy',
  'chicken',
  'belief',
  'rail',
  'camp',
  'texture',
  'condition',
  'border',
  'engine',
  'religion',
  'basket',
  'toes',
  'fish',
  'rhythm',
  'jar',
  'robin',
  'route',
  'temper',
  'roof',
  'science',
  'sound',
  'growth',
  'cushion',
  'table',
  'water',
  'throne',
  'jeans',
  'collar',
  'waves',
  'size',
  'government',
  'knot',
  'canvas',
  'vessel',
  'pump',
  'corn',
];
export const generateSecret = (): string => {
  const randomNumber = Math.floor(Math.random() * adjectives.length);
  return `${adjectives[randomNumber]} ${nouns[randomNumber]}`;
};

const sendMail = (email: Email) => {
  const option = {
    auth: {
      api_user: process.env.SENDGRID_USERNAME,
      api_key: process.env.SENDGRID_PASSWORD,
    },
  };
  const client = nodemailer.createTransport(sgTransport(option));
  return client.sendMail(email);
};

export const sendSecretMail = (address: string, secret: string) => {
  const email = {
    from: 'garden1594@naver.com',
    to: address,
    subject: 'Login Secret for Prismagram 🔒',
    html: `Hello! Your login secret is <strong>${secret}</strong><br/> Copy paste on the app/website to login`,
  };
  return sendMail(email);
};

export const generateToken = (id: string) => jwt.sign({ id }, process.env.JWT_SECRET!); //0-1. 받은 id를 SECRET을 사용하여 토큰으로 생성
